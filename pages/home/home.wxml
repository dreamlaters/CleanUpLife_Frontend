<!-- é¦–é¡µ - è¿‡æœŸæé†’ + å¿«æ·å…¥å£ -->
<view class="container">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="custom-navbar" style="padding-top: {{statusBarHeight}}px">
    <view class="navbar-content">
      <view class="navbar-left">
        <text class="greeting">{{greeting}}</text>
        <text class="date-text">{{dateText}}</text>
      </view>
    </view>
  </view>

  <!-- å ä½ï¼Œé¿å…å†…å®¹è¢«å¯¼èˆªæ é®æŒ¡ -->
  <view class="navbar-placeholder" style="height: {{navbarHeight}}px"></view>

  <!-- è¿‡æœŸæé†’åŒºåŸŸ -->
  <view class="section-card alert-card" wx:if="{{expiredItems.length || expiringSoonItems.length}}">
    <view class="section-header">
      <view class="section-title-wrap">
        <view class="section-icon">âš ï¸</view>
        <text class="section-title">è¿‡æœŸæé†’</text>
      </view>
      <view class="alert-badge" wx:if="{{expiredItems.length + expiringSoonItems.length}}">
        {{expiredItems.length + expiringSoonItems.length}}ä»¶
      </view>
    </view>

    <!-- å·²è¿‡æœŸç‰©å“ -->
    <view class="alert-group" wx:if="{{expiredItems.length}}">
      <view class="alert-group-header alert-danger">
        <text class="alert-dot"></text>
        <text class="alert-group-title">å·²è¿‡æœŸ ({{expiredItems.length}})</text>
      </view>
      <view class="alert-list">
        <view 
          class="alert-item"
          wx:for="{{expiredItems}}" 
          wx:key="id"
          bindtap="goToUpdateItem"
          data-id="{{item.id}}"
          data-category="{{item.category}}"
        >
          <text class="alert-item-emoji">{{item.emoji || 'ğŸ“¦'}}</text>
          <view class="alert-item-info">
            <text class="alert-item-name">{{item.name}}</text>
            <text class="alert-item-date danger">è¿‡æœŸ{{item.daysText}}</text>
          </view>
          <text class="alert-item-arrow">â€º</text>
        </view>
      </view>
    </view>

    <!-- å³å°†è¿‡æœŸç‰©å“ -->
    <view class="alert-group" wx:if="{{expiringSoonItems.length}}">
      <view class="alert-group-header alert-warning">
        <text class="alert-dot"></text>
        <text class="alert-group-title">å³å°†è¿‡æœŸ ({{expiringSoonItems.length}})</text>
      </view>
      <view class="alert-list">
        <view 
          class="alert-item"
          wx:for="{{expiringSoonItems}}" 
          wx:key="id"
          bindtap="goToUpdateItem"
          data-id="{{item.id}}"
          data-category="{{item.category}}"
        >
          <text class="alert-item-emoji">{{item.emoji || 'ğŸ“¦'}}</text>
          <view class="alert-item-info">
            <text class="alert-item-name">{{item.name}}</text>
            <text class="alert-item-date warning">{{item.daysText}}åè¿‡æœŸ</text>
          </view>
          <text class="alert-item-arrow">â€º</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ— æé†’æ—¶çš„ç©ºçŠ¶æ€ -->
  <view class="section-card empty-alert-card" wx:if="{{!loading && !expiredItems.length && !expiringSoonItems.length}}">
    <view class="empty-alert-content">
      <text class="empty-alert-icon">âœ¨</text>
      <text class="empty-alert-title">å¤ªæ£’äº†ï¼</text>
      <text class="empty-alert-text">æ²¡æœ‰å³å°†è¿‡æœŸçš„ç‰©å“</text>
    </view>
  </view>

  <!-- å¿«æ·å…¥å£ -->
  <view class="section-card">
    <view class="section-header">
      <view class="section-title-wrap">
        <view class="section-icon">âš¡</view>
        <text class="section-title">å¿«æ·æ“ä½œ</text>
      </view>
    </view>
    
    <view class="quick-grid">
      <view class="quick-item" bindtap="goToAddItem">
        <view class="quick-icon quick-icon-primary">ğŸ“¦</view>
        <text class="quick-label">æ·»åŠ ç‰©å“</text>
      </view>
      <view class="quick-item" bindtap="goToToBuyList">
        <view class="quick-icon quick-icon-success">ğŸ›’</view>
        <text class="quick-label">å¾…è´­æ¸…å•</text>
      </view>
      <view class="quick-item" bindtap="goToTravel">
        <view class="quick-icon quick-icon-info">âœˆï¸</view>
        <text class="quick-label">å‡ºè¡Œè®¡åˆ’</text>
      </view>
      <view class="quick-item" bindtap="goToGoals">
        <view class="quick-icon quick-icon-warning">ğŸ¯</view>
        <text class="quick-label">å¹´åº¦ç›®æ ‡</text>
      </view>
    </view>

    <!-- ç»Ÿè®¡æ¦‚è§ˆ - æ”¾åœ¨å¿«æ·æ“ä½œå¡ç‰‡å†… -->
    <view class="stats-section">
      <view class="stats-divider"></view>
      <view class="stats-grid">
        <view class="stat-item" bindtap="goToItems">
          <text class="stat-value">{{totalItems}}</text>
          <text class="stat-label">ç‰©å“</text>
        </view>
        <view class="stat-item" bindtap="goToToBuyList">
          <text class="stat-value">{{toBuyCount}}</text>
          <text class="stat-label">å¾…è´­</text>
        </view>
        <view class="stat-item" bindtap="goToTravel">
          <text class="stat-value">{{travelCount}}</text>
          <text class="stat-label">æƒ³å»</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- åº•éƒ¨æ¶ˆæ¯æ¨é€å…¥å£ -->
  <view class="footer-link-wrap">
    <navigator url="/pages/openid/openid" class="footer-link">
      <text class="footer-link-icon">ğŸ””</text>
      <text class="footer-link-text">æ¶ˆæ¯æ¨é€è®¾ç½®</text>
      <text class="footer-link-arrow">â€º</text>
    </navigator>
  </view>

  <!-- åº•éƒ¨å®‰å…¨åŒº -->
  <view class="safe-bottom"></view>
</view>
